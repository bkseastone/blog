---
layout: page
title: 工程能力:自解释代码
categories: [工程能力]
tags: [工程能力, cs]
keywords: 
description: 摘要描述
mathjax: true
---

## 编写可读代码

> 推荐阅读：《编写可读代码的艺术》、《Code Complete》、《设计模式》、《重构-改善既有代码的设计》、经典开源项目

### 自解释代码

**目标**：脑细胞死亡量达到最少

**方法**：

1. 命名
   * 信息：10行内的函数能结合上下文看懂即可；更长的，则需有足够的信息量（后缀单位，后缀限定词，等）
   * 有效：无重复表达含义的词（如ConvertToXXX），不用歧义词（如filter），等
   * 习惯：函数用动宾，`getxxx()`,`setxxx()`只用于表达简单操作，成对API参数含义一致，测试函数命名`Test_<function>_<测试环境>_<期望输出>`等

2. 注释
   * WHY：用常量设计该数值的原因给常量加注释，可能的陷阱也需加注释，等
   * WHAT：给函数加注释以便更快的了解代码的功能，而直接看代码一眼就能知道含义的无需加注释
   * HOW：用注释解释比较HACK的地方

3. 逻辑
   * 为了代码的可读性/减少注释，尽量不要省略中间变量/函数

4. 结构
   * 减少嵌套，避免大脑不断的压栈：将边界判断分条置前
   * 善用空行

### 编写代码的设计原则

1. 谋定而后动：单一职责原则，使得业务逻辑更清晰
2. 重构：
   * 当产生三次重构冲动时再去重构
   * 保证接口与实现分离（用新的类实现，以达到接口相同，实现不同的目的），使得代码只依赖于接口，以便于版本的迭代更新
   * 局部重构，持续集成

